{% load static %}

{% if pagination %}
    {% include "pagination.html" with page=goods %}
{% endif %}

{% if goods %}
<div class="container-fluid">
    <div class="row row-cols-4">
        {% for g in goods %}
        {% if forloop.counter0|divisibleby:3 %}
    </div><br><div class="row row-cols-3">
    {% endif %}
    <div class="col-4">
                <h5><b> {{ g.date }} </b></h5>
                <div>
                    <a href="{% url 'good_detail' owner_id=g.vk_owner_id photo_id=g.vk_photo_id %}">
                        <div class="good-img" style="background-image:url('{{g.get_preview_photo}}')"></div>
                    </a>
                </div>
                <div class="mt-2 mb-2" >
                    <a class="link-img" href="https://t.me/{{channel}}/{{ g.tg_post_id }}" target="_blank">
                        <img class="vk-logo-goods" src="{% static 'tg-logo.svg' %}" alt="Telegram"/>
                    </a>
                    <a class="link-img" href="https://vk.com/photo{{ g.vk_owner_id }}_{{g.vk_photo_id}}">
                        <img class="vk-logo-goods" src="{% static 'vk-logo.svg' %}" alt="ВКонтакте"/>
                    </a>
                    {% if show_duplicates %}
                    {% if g.has_duplicates %}
                    <a href="{% url 'goods_hash' photo_hash=g.hash %}">дубли<b>({{g.duplicates_number}})</b></a>
                    {% endif %}
                    {% endif %}
                </div>
                <div>
                    {% if show_seller %}
                    <p>
                        <b>Продавец: </b>
                        <a href="https://vk.com/id{{ g.seller.vk_id }}">{{g.seller.first_name}} {{g.seller.last_name}}</a>
                        |
                        <a href="{% url 'seller_detail' pk=g.seller.vk_id %}">история</a>
                    </p>
                    {% endif %}
                </div>
                {% if g.descr  %}
                <div>
                    <p class="text-break"> <b>Описание: </b> {{ g.descr|truncatewords_html:30 }}
                        <a href="{% url 'good_detail' owner_id=g.vk_owner_id photo_id=g.vk_photo_id %}">
                            подробнее...
                        </a>
                    </p>
                </div>
                {% endif %}

                {% if g.comments and not g.descr %}
                <div>
                    <p class="text-break"> <b>Комментарии: </b> {{ g.comments|truncatewords_html:30 }}
                        <a href="{% url 'good_detail' owner_id=g.vk_owner_id photo_id=g.vk_photo_id %}">
                            подробнее...
                        </a>
                    </p>
                </div>
                {% endif %}

    </div>
    {% endfor %}

</div>
</div>
{% endif %}

{% if pagination %}
    {% include "pagination.html" with page=goods %}
{% endif %}
